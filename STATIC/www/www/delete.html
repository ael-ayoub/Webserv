<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DELETE - WEBSERV</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <header>
        <div class="title-block">
            <h1 class="brutalist-title">DELETE</h1>
        </div>
        <nav>
            <a href="/index.html">HOME</a>
            <a href="/about.html">ABOUT</a>
            <a href="/upload.html">UPLOAD</a>
            <a href="/session.html">SESSION</a>
            <a href="/form.html">FORM</a>
            <a href="/search.html">SEARCH</a>
            <a href="/delete.html">DELETE</a>
        </nav>
    </header>

    <main>
        <section class="page-header">
            <h1>DELETE METHOD TEST</h1>
            <p style="margin-top: 1rem; color: var(--text-secondary);">HTTP DELETE REQUEST VIA JAVASCRIPT</p>
        </section>

        <section class="content-section">
            <h2 class="section-title">DELETE FILE</h2>
            <div class="brutalist-box">
                <span class="box-number">01</span>
                <div class="form-group">
                    <label for="filename">FILENAME TO DELETE:</label>
                    <input type="text" id="filename" placeholder="e.g., test.txt">
                </div>
                <button onclick="deleteFile()">DELETE FILE →</button>
                <div id="deleteResult" class="result" style="display: none;"></div>
            </div>
        </section>

        <section class="content-section" style="background: var(--bg-primary); padding: 4rem 2rem;">
            <h2 class="section-title">DELETE RESOURCE</h2>
            <div class="brutalist-box">
                <span class="box-number">02</span>
                <div class="form-group">
                    <label for="resourcePath">RESOURCE PATH:</label>
                    <input type="text" id="resourcePath" placeholder="/uploads/yourfile.txt">
                </div>
                <button onclick="deleteResource()">DELETE RESOURCE →</button>
                <div id="resourceResult" class="result" style="display: none;"></div>
            </div>
        </section>

        <section class="content-section">
            <h2 class="section-title">TEST FILES</h2>
            <div class="brutalist-box">
                <span class="box-number">03</span>
                <p style="margin-bottom: 1rem;">CREATE THESE FILES VIA UPLOAD FIRST:</p>
                <ul style="margin-bottom: 2rem;">
                    <li>test.txt</li>
                    <li>sample.html</li>
                    <li>data.json</li>
                    <li>demo.md</li>
                </ul>
                <div class="endpoint-list">
                    <div class="endpoint-item" style="cursor: pointer;" onclick="quickDelete('test.txt')">
                        <span class="endpoint-method">DELETE</span>
                        <span class="endpoint-path">test.txt</span>
                        <span class="endpoint-desc">Quick delete test file</span>
                    </div>
                    <div class="endpoint-item" style="cursor: pointer;" onclick="quickDelete('sample.html')">
                        <span class="endpoint-method">DELETE</span>
                        <span class="endpoint-path">sample.html</span>
                        <span class="endpoint-desc">Quick delete sample file</span>
                    </div>
                    <div class="endpoint-item" style="cursor: pointer;" onclick="quickDelete('data.json')">
                        <span class="endpoint-method">DELETE</span>
                        <span class="endpoint-path">data.json</span>
                        <span class="endpoint-desc">Quick delete data file</span>
                    </div>
                </div>
                <div id="quickResult" class="result" style="display: none; margin-top: 1rem;"></div>
            </div>
        </section>

    </main>

    <footer>
        <p>© 2026 WEBSERV PROJECT | C++98 COMPLIANT</p>
    </footer>

    <script>
        function deleteFile() {
            const filename = document.getElementById('filename').value;
            const resultDiv = document.getElementById('deleteResult');
            
            if (!filename) {
                showResult(resultDiv, 'PLEASE ENTER A FILENAME', 'error');
                return;
            }
            
            fetch('/uploads/' + filename, {
                method: 'DELETE'
            })
            .then(response => {
                if (response.ok) {
                    showResult(resultDiv, 'FILE DELETED SUCCESSFULLY: ' + filename, 'success');
                } else {
                    showResult(resultDiv, 'DELETE FAILED: ' + response.status, 'error');
                }
            })
            .catch(error => {
                showResult(resultDiv, 'ERROR: ' + error.message, 'error');
            });
        }

        function deleteResource() {
            const resourcePath = document.getElementById('resourcePath').value;
            const resultDiv = document.getElementById('resourceResult');
            
            if (!resourcePath) {
                showResult(resultDiv, 'PLEASE ENTER A RESOURCE PATH', 'error');
                return;
            }
            
            fetch(resourcePath, {
                method: 'DELETE'
            })
            .then(response => {
                if (response.ok) {
                    showResult(resultDiv, 'RESOURCE DELETED: ' + resourcePath, 'success');
                } else {
                    showResult(resultDiv, 'DELETE FAILED: ' + response.status, 'error');
                }
            })
            .catch(error => {
                showResult(resultDiv, 'ERROR: ' + error.message, 'error');
            });
        }

        function quickDelete(filename) {
            const resultDiv = document.getElementById('quickResult');
            
            fetch('/uploads/' + filename, {
                method: 'DELETE'
            })
            .then(response => {
                if (response.ok) {
                    showResult(resultDiv, 'DELETED: ' + filename, 'success');
                } else {
                    showResult(resultDiv, 'FAILED TO DELETE: ' + filename + ' (STATUS: ' + response.status + ')', 'error');
                }
            })
            .catch(error => {
                showResult(resultDiv, 'ERROR: ' + error.message, 'error');
            });
        }

        function showResult(element, message, type) {
            element.textContent = message;
            element.className = 'result ' + type;
            element.style.display = 'block';
            
            setTimeout(() => {
                element.style.display = 'none';
            }, 5000);
        }
    </script>
</body>
</html>
